<header></header>
<main class="container-fluid p-5">
  <h1 class="title text-center text-uppercase m-4">Crea tu sorteo</h1>
  <hr />
  <section class="my-4">
    <form [formGroup]="createRaffleForm" (ngSubmit)="onSubmit()">
      <!-- Campo para el nombre del sorteo -->
      <div class="mb-3">
        <label for="title" class="form-label">Nombre del sorteo</label>
        <input
          type="text"
          id="title"
          class="form-control"
          formControlName="title"
          placeholder="Ingresa el nombre del sorteo"
        />
        <!-- Mensaje de error para el nombre del sorteo -->
        <div
          class="errors text-danger"
          *ngIf="title?.invalid && (title?.touched || title?.dirty)"
        >
          <div *ngIf="title?.errors?.['required']">
            El nombre del sorteo es obligatorio.
          </div>
        </div>
      </div>

      <!-- Campo para la fecha de inicio -->
      <div class="mb-3">
        <label for="startDate" class="form-label">Fecha de inicio</label>
        <input
          type="date"
          id="startDate"
          class="form-control"
          formControlName="startDate"
        />
        <!-- Mensaje de error para la fecha de inicio -->
        <div
          class="errors text-danger"
          *ngIf="startDate?.invalid && (startDate?.touched || startDate?.dirty)"
        >
          <div *ngIf="startDate?.errors?.['required']">
            La fecha de inicio es obligatoria.
          </div>
          <div *ngIf="startDate?.errors?.['invalidDate']">
            {{ startDate.errors?.['invalidDate'] }}
          </div>
        </div>
      </div>

      <!-- Campo para la fecha de fin -->
      <div class="mb-3">
        <label for="endDate" class="form-label">Fecha de fin</label>
        <input
          type="date"
          id="endDate"
          class="form-control"
          formControlName="endDate"
        />
        <div
          class="errors text-danger"
          *ngIf="endDate?.invalid && (endDate?.touched || endDate?.dirty)"
        >
          <div *ngIf="endDate?.errors?.['required']">
            La fecha de fin es obligatoria.
          </div>
          <div *ngIf="endDate?.errors?.['invalidDate']">
            {{ endDate.errors?.['invalidDate'] }}
          </div>
        </div>
      </div>

      <!-- Campo para el rango mínimo de boletos -->
      <div class="mb-3">
        <label for="minTicketsRange" class="form-label"
          >Rango mínimo de boletos</label
        >
        <input
          type="number"
          id="minTicketsRange"
          class="form-control"
          formControlName="ticketsMin"
          [min]="minTicketsRange"
        />
        <div
          class="errors text-danger"
          *ngIf="
            ticketsMin?.invalid && (ticketsMin?.touched || ticketsMin?.dirty)
          "
        >
          <div *ngIf="ticketsMin?.errors?.['required']">
            El rango mínimo de boletos es obligatorio.
          </div>
          <div *ngIf="ticketsMin?.errors?.['min']">
            El rango mínimo de boletos no puede ser menor a 1.
          </div>
        </div>
      </div>

      <!-- Campo para el rango máximo de boletos -->
      <div class="mb-3">
        <label for="maxTicketsRange" class="form-label"
          >Rango máximo de boletos</label
        >
        <input
          type="number"
          id="maxTicketsRange"
          class="form-control"
          formControlName="ticketsMax"
        />
        <div
          class="errors text-danger"
          *ngIf="
            ticketsMax?.invalid && (ticketsMax?.touched || ticketsMax?.dirty)
          "
        >
          <div *ngIf="ticketsMax?.errors?.['required']">
            El rango máximo de boletos es obligatorio.
          </div>
          <div *ngIf="ticketsMax?.errors?.['invalidTickets']">
            {{ ticketsMax.errors?.['invalidTickets'] }}
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="image" class="form-label">Imagen del sorteo</label>
        <input
          type="file"
          id="image"
          class="form-control"
          (change)="onImageSelected($event)"
          accept="image/*"
          formControlName="image"
        />
        <div
          *ngIf="imagePreview"
          class="image-preview"
          style="
            width: 200px;
            height: 200px;
            overflow: hidden;
            border: 1px solid #ccc;
          "
        >
          <img
            [src]="imagePreview"
            alt="Imagen Previa"
            style="width: 100%; height: auto; object-fit: cover"
          />
        </div>
      </div>

      <!-- Botón de enviar -->
      <div class="d-grid gap-2">
        <button class="btn btn-primary" type="button">Crear Sorteo</button>
      </div>
    </form>
  </section>
</main>
